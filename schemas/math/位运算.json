{
  "id": "",
  "module_type": "bitOperation",
  "category": "运算模块/数学运算",
  "name": "位运算",
  "description": "位运算模块对输入信号进行二进制位级别的逻辑运算。支持四种位运算模式:位与(AND)、位或(OR)、位异或(XOR)、位非(NOT)。位与、位或、位异或支持2-16个输入,位非固定1个输入。典型应用场景包括:设备状态标志位判断、硬件IO端口批量操作、通信协议位掩码处理、错误码解析、状态寄存器解析、控制信号位操作等。所有输入信号必须是整型数。",
  "keywords": [
    "位运算",
    "位与",
    "位或",
    "位异或",
    "位非",
    "bit operation",
    "bitwise AND",
    "bitwise OR",
    "bitwise XOR",
    "bitwise NOT",
    "二进制运算",
    "位操作",
    "bit manipulation",
    "逻辑位运算",
    "按位与",
    "按位或",
    "按位异或",
    "按位取反",
    "flags",
    "位掩码"
  ],
  "usage_guides": [
    "位与模式(lType=AND): 对所有输入的对应二进制位进行与运算。运算公式: 输入1 & 输入2 & ... & 输入n = 输出。示例: 7 & 5 = 5(0111 & 0101 = 0101), 7 & 5 & 4 = 4(0111 & 0101 & 0100 = 0101)。",
    "位或模式(lType=OR): 对所有输入的对应二进制位进行或运算。运算公式: 输入1 | 输入2 | ... | 输入n = 输出。示例: 4 | 2 = 6(0100 | 0010 = 0110), 7 | 5 | 4 = 7(0111 | 0101 | 0100 = 0111)。",
    "位异或模式(lType=XOR): 对所有输入的对应二进制位进行异或运算。运算公式: 输入1 xor 输入2 xor ... xor 输入n = 输出。示例: 8 xor 5 = 13(1000 xor 0101 = 1101), 8 xor 5 xor 9 = 4(1000 xor 0101 xor 1001 = 0100)。",
    "位非模式(lType=NOT): 对输入的二进制位进行取反运算。运算公式: ~输入 = 输出。示例: ~5 = -6(~00000101 = 11111010,补码表示)。位非模式固定只有1个输入。",
    "模式选择: 在参数配置中设置lType字段,可选值为AND(位与)、OR(位或)、XOR(位异或)、NOT(位非),默认值为AND。",
    "输入数量配置: 位与、位或、位异或模式下,可在2-16范围内调整输入端口数量,默认值为2;位非模式下固定为1个输入,不可修改。",
    "应用场景1: 设备状态标志位判断-使用位与运算判断设备状态寄存器中的特定标志位是否激活,如检测故障位、报警位、运行状态位等,实现多条件组合判断。",
    "应用场景2: 硬件IO端口批量控制-使用位或运算将多个IO端口控制信号组合成一个整数,通过数字输出端口同时控制多个继电器或指示灯,简化接线并减少端口占用。",
    "应用场景3: 通信协议位掩码处理-在Modbus、BACnet等通信协议中,使用位运算解析或构建位掩码字段,处理设备间通信的控制命令和状态反馈。",
    "wires连接: wires数组根据输入数量自动生成,包含与输入端口数量相同的空数组,用于连接上游模块的输出。位非模式只有1个wire连接。",
    "停用保护: 默认 outOfService=0(启用状态),可设置为1进入维护模式并输出0。",
    "注意事项: 所有输入信号必须是整型数;位与、位或、位异或需要至少2个输入,最多16个;位非只有1个输入;注意位运算是对二进制位进行操作,不是普通的逻辑运算;理解补码表示对位非运算结果的影响。"
  ],
  "parameters_schema": {
    "name": {
      "type": "string",
      "description": "模块显示名称,由用户根据实际应用场景定义。",
      "maxLength": 50,
      "default": "user_defined_name"
    },
    "lType": {
      "type": "string",
      "description": "位运算模式。AND为位与,OR为位或,XOR为位异或,NOT为位非。",
      "enum": ["AND", "OR", "XOR", "NOT"],
      "default": "AND"
    },
    "inputs": {
      "type": "integer",
      "description": "运算输入数量。位与、位或、位异或模式下为2-16,位非模式固定为1。",
      "minimum": 1,
      "maximum": 16,
      "default": 2
    }
  },
  "template_json": {
    "id": "{{__GEN_ID__}}",
    "z": "{{__FLOW_ID__}}",
    "type": "bitOperation",
    "name": "{{user_defined_name}}",
    "inputs": "{{inputs}}",
    "outputs": 1,
    "lType": "{{lType}}",
    "outOfService": 0,
    "outOfServiceValue": 0,
    "x": "{{__AUTO_X__}}",
    "y": "{{__AUTO_Y__}}",
    "wires": "{{__WIRES__}}"
  }
}
